(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,n,e){"use strict";(function(t){var a=e(15),r=e.n(a),o=e(22),i=e(13),c=e(28),s=e(6),u=e(7),f=e(9),l=e(8),h=e(10),p=e(1),m=e(0),v=e.n(m),b=e(2),d=e(23),g=e(25),w=e(3);function y(){var t=Object(p.a)(["\n  width: 700px;\n  margin: auto;\n"]);return y=function(){return t},t}function j(){var t=Object(p.a)(["\n  margin-right: 10px;\n"]);return j=function(){return t},t}function O(){var t=Object(p.a)(["\n  width: 500px;\n  margin: 20px auto 0;\n  text-align: center;\n"]);return O=function(){return t},t}function k(){var t=Object(p.a)(["\n  width: 500px;\n  float: left;\n"]);return k=function(){return t},t}var P=b.a.div(k()),E=b.a.div(O()),x=b.a.button(j()),C=function(n){function e(){var n,a;Object(s.a)(this,e);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(a=Object(f.a)(this,(n=Object(l.a)(e)).call.apply(n,[this].concat(o)))).state={isPlaying:!1,fen:"",history:[]},a.newGame=function(){a.setState({isPlaying:!1,fen:w.h(),history:[]})},a.hasBoardNotChanged=function(t,n){return a.state.isPlaying===t.isPlaying&&a.state.fen===t.fen&&a.props.white===n.white&&a.props.black===n.black},a.onMovePiece=function(t,n,e){a.doMove(n,e)},a.doMove=function(n,e){var r=w.g(a.state.fen,n,e);if(r){var o=Object(c.a)(r,2),s=o[0],u=o[1];if(w.c(s))return t.confirm("We have a winner!"),void a.newGame();a.setState({fen:s,history:Object(i.a)(a.state.history).concat([u])})}},a.onDragStart=function(t,n){var e=a.state,r=e.fen,o=e.isPlaying,i=a.props,c=i.white,s=i.black;return o&&w.d(r,n)&&(!c&&w.f(r)||!s&&w.a(r))},a.togglePlay=function(){a.setState(function(t){return{isPlaying:!t.isPlaying}})},a}return Object(h.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.newGame()}},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(r.a.mark(function t(n,e){var a,o,i,c,s,u,f,l,h,p,m,v;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.state,o=a.fen,i=a.isPlaying,c=this.props,s=c.white,u=c.black,i&&!this.hasBoardNotChanged(n,e)){t.next=4;break}return t.abrupt("return");case 4:if(!s||!w.f(o)&&!w.e(o)){t.next=11;break}return t.next=7,s(o);case 7:f=t.sent,l=f.from,h=f.to,s===this.props.white&&this.doMove(l,h);case 11:if(!u||!w.a(o)){t.next=18;break}return t.next=14,u(o);case 14:p=t.sent,m=p.from,v=p.to,u===this.props.black&&this.doMove(m,v);case 18:case"end":return t.stop()}},t,this)}));return function(n,e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return v.a.createElement("div",{className:this.props.className},v.a.createElement(P,null,v.a.createElement(d.a,{fen:this.state.fen,onDragStart:this.onDragStart,onMovePiece:this.onMovePiece}),v.a.createElement(E,null,v.a.createElement(x,{onClick:this.newGame},"New Game"),v.a.createElement(x,{onClick:this.togglePlay},this.state.isPlaying?"Pause":"Play"),w.b(this.state.fen)&&"Check")),v.a.createElement(g.a,{history:this.state.history}))}}]),e}(m.Component);n.a=Object(b.a)(C)(y())}).call(this,e(35))},23:function(t,n,e){"use strict";var a=e(11),r=e(0),o=e.n(r),i=e(24),c=e.n(i),s=e(3);n.a=function(t){var n=t.fen,e=Object(a.a)(t,["fen"]);return o.a.createElement(c.a,Object.assign({pieces:Object(s.i)(n)},e))}},25:function(t,n,e){"use strict";var a=e(11),r=e(1),o=e(0),i=e.n(o),c=e(2);function s(){var t=Object(r.a)(["\n  width: 180px;\n  height: 480px;\n  overflow: scroll;\n  float: left;\n  padding: 10px;\n  margin: 0;\n"]);return s=function(){return t},t}n.a=Object(c.a)(function(t){var n=t.history,e=Object(a.a)(t,["history"]);return i.a.createElement("pre",e,n.map(function(t){var n=t.piece,e=t.color,a=t.from,r=t.san;return"".concat("w"===e?n:n.toUpperCase()).concat(a," ").concat(r)}).join("\n"))})(s())},3:function(t,n,e){"use strict";e.d(n,"h",function(){return i}),e.d(n,"e",function(){return c}),e.d(n,"a",function(){return s}),e.d(n,"f",function(){return u}),e.d(n,"b",function(){return f}),e.d(n,"c",function(){return l}),e.d(n,"d",function(){return h}),e.d(n,"g",function(){return p}),e.d(n,"i",function(){return m});var a=e(13),r=e(5),o=e.n(r),i=function(){return"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},c=function(t){return t===i()},s=function(t){return"b"===t.split(" ")[1]},u=function(t){return"w"===t.split(" ")[1]},f=function(t){return new o.a(t).in_check()},l=function(t){return new o.a(t).game_over()},h=function(t,n){return new o.a(t).moves({square:n}).length>0},p=function(t,n,e){var a=new o.a(t),r=a.move({from:n,to:e,promotion:"q"});return r&&[a.fen(),r]},m=function(t){var n=new o.a(t);return n.SQUARES.reduce(function(t,e){var r=n.get(e);if(!r)return t;var o="w"===r.color?r.type.toUpperCase():r.type;return Object(a.a)(t).concat(["".concat(o,"@").concat(e)])},[])}},30:function(t,n,e){t.exports=e(60)},60:function(t,n,e){"use strict";e.r(n);var a=e(0),r=e.n(a),o=e(12),i=e.n(o),c=e(20),s=e(6),u=e(7),f=e(9),l=e(8),h=e(10),p=e(1),m=e(2),v=e(21),b=e(11);function d(){var t=Object(p.a)(["\n  padding: 20px 0;\n  float: left;\n  margin-right: 20px;\n"]);return d=function(){return t},t}function g(){var t=Object(p.a)(["\n  margin-right: 10px;\n"]);return g=function(){return t},t}var w=function(t,n){var e=t.filter(function(t){return t.name===n})[0].action;return e&&e()},y=Object(m.a)(function(t){var n=t.name,e=Object(b.a)(t,["name"]);return r.a.createElement("span",e,n.toLowerCase().replace(/\b(\w)/g,function(t){return t.toUpperCase()}))})(g()),j=function(t){function n(){var t,e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=Object(f.a)(this,(t=Object(l.a)(n)).call.apply(t,[this].concat(r)))).state={selected:void 0},e.onBotChange=function(t){var n=t.target.value;e.setState({selected:n},function(){e.props.onBotChange(e.props.player,w(e.props.bots,n))})},e}return Object(h.a)(n,t),Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},r.a.createElement(y,{name:this.props.player}),r.a.createElement("select",{value:this.state.selected,onChange:this.onBotChange},this.props.bots.map(function(t){var n=t.name;return r.a.createElement("option",{key:n},n)})))}}]),n}(a.Component),O=Object(m.a)(j)(d());function k(){var t=Object(p.a)(['\n  margin: auto;\n  padding: 0;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n']);return k=function(){return t},t}function P(){var t=Object(p.a)(["\n  margin: auto;\n  width: 500px;\n"]);return P=function(){return t},t}var E=m.a.div(P()),x=function(t){function n(){var t,e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=Object(f.a)(this,(t=Object(l.a)(n)).call.apply(t,[this].concat(r)))).state={white:void 0,black:void 0},e.handleBotChange=function(t,n){e.setState(Object(c.a)({},t,n))},e}return Object(h.a)(n,t),Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},r.a.createElement(E,null,r.a.createElement(O,{bots:this.props.bots,player:"white",onBotChange:this.handleBotChange}),r.a.createElement(O,{bots:this.props.bots,player:"black",onBotChange:this.handleBotChange})),r.a.createElement(v.a,{white:this.state.white,black:this.state.black}))}}]),n}(a.Component),C=Object(m.a)(x)(k()),S=e(5),M=e.n(S),B=function(t,n){return function(){var e=new Worker(t),a=null;return e.addEventListener("message",function(t){var n=t.data.match(/^bestmove\s([a-h][1-8])([a-h][1-8])/);n&&a&&(a({from:n[1],to:n[2]}),a=null)}),function(t){return new Promise(function(r){a=r,e.postMessage("position fen ".concat(t)),e.postMessage(n)})}}},N=function(t){return B("stockfish.js","go depth ".concat(t))},D=function(t){return B("stockfish.wasm.js","go depth ".concat(t))},U=[{name:"User",action:void 0},{name:"Random",action:function(){return function(t){return new Promise(function(n){var e=new M.a(t).moves({verbose:!0}),a=e[Math.floor(Math.random()*e.length)],r=a.from,o=a.to;setTimeout(function(){return n({from:r,to:o})},500)})}}},{name:"Stockfish WASM (Depth 10)",action:N(10)},{name:"Stockfish WASM (Depth 20)",action:N(20)},{name:"Stockfish JS (Depth 10)",action:D(10)},{name:"Stockfish JS (Depth 20)",action:D(20)}];i.a.render(r.a.createElement(C,{bots:U}),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.984e77c0.chunk.js.map